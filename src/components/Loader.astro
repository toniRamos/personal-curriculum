---
// Enhanced Loader component with anime.js animations
---

<div class="loader-wrapper" id="loader">
	<div class="loader">
		<div class="loader-logo">
			<div class="logo-container">
				<div class="logo-square animate-entrance" id="logo-square">
					<span class="logo-text animate-entrance" id="logo-text">AR</span>
				</div>
				<div class="loading-dots">
					<div class="dot animate-entrance" id="dot1"></div>
					<div class="dot animate-entrance" id="dot2"></div>
					<div class="dot animate-entrance" id="dot3"></div>
				</div>
			</div>
		</div>
	</div>
</div>

<style>
	.loader-wrapper {
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		height: 100%;
		background: linear-gradient(135deg, #0a192f 0%, #112240 100%);
		z-index: 9999;
		display: flex;
		justify-content: center;
		align-items: center;
		transition: all 0.6s cubic-bezier(0.645, 0.045, 0.355, 1);
	}

	.loader-wrapper.fade-out {
		opacity: 0;
		visibility: hidden;
	}

	.loader {
		text-align: center;
		color: #64ffda;
	}

	.logo-container {
		position: relative;
		margin-bottom: 30px;
	}

	.logo-square {
		width: 100px;
		height: 100px;
		border: 3px solid #64ffda;
		border-radius: 8px;
		display: flex;
		justify-content: center;
		align-items: center;
		margin: 0 auto 20px;
		position: relative;
		background: rgba(100, 255, 218, 0.05);
		box-shadow: 
			0 0 20px rgba(100, 255, 218, 0.3),
			inset 0 0 20px rgba(100, 255, 218, 0.1);
		opacity: 1;
		transform: scale(1) rotate(0deg);
		filter: blur(0px);
		animation: blurPulse 3s ease-in-out infinite;
	}

	.logo-square.animate-entrance {
		opacity: 0;
		transform: scale(0.5) rotate(45deg);
	}

	.logo-text {
		color: #64ffda;
		font-size: 36px;
		font-weight: 600;
		font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
		user-select: none;
		opacity: 1;
		transform: scale(1);
		filter: blur(0px);
		animation: textGlow 2s ease-in-out infinite alternate;
	}

	.logo-text.animate-entrance {
		opacity: 0;
		transform: scale(0);
	}

	.loading-dots {
		display: flex;
		justify-content: center;
		gap: 8px;
		margin-top: 15px;
	}

	.dot {
		width: 8px;
		height: 8px;
		background-color: #64ffda;
		border-radius: 50%;
		opacity: 0.6;
		transform: scale(1);
		animation: dotPulse 1.5s ease-in-out infinite;
	}

	.dot:nth-child(1) {
		animation-delay: 0s;
	}

	.dot:nth-child(2) {
		animation-delay: 0.3s;
	}

	.dot:nth-child(3) {
		animation-delay: 0.6s;
	}

	.dot.animate-entrance {
		opacity: 0.3;
		transform: scale(0);
	}

	.loading-text {
		font-family: 'SF Mono', 'Monaco', 'Inconsolata', 'Roboto Mono', monospace;
		font-size: 14px;
		color: #8892b0;
		letter-spacing: 1px;
		margin-top: 20px;
		opacity: 1;
		transform: translateY(0px);
	}

	.loading-text.animate-entrance {
		opacity: 0;
		transform: translateY(20px);
	}

	/* Animaciones CSS */
	@keyframes blurPulse {
		0% {
			filter: blur(0px);
			transform: scale(1);
			box-shadow: 
				0 0 20px rgba(100, 255, 218, 0.3),
				inset 0 0 20px rgba(100, 255, 218, 0.1);
		}
		25% {
			filter: blur(2px);
			transform: scale(1.02);
			box-shadow: 
				0 0 30px rgba(100, 255, 218, 0.5),
				inset 0 0 30px rgba(100, 255, 218, 0.2);
		}
		50% {
			filter: blur(4px);
			transform: scale(1.05);
			box-shadow: 
				0 0 40px rgba(100, 255, 218, 0.7),
				inset 0 0 40px rgba(100, 255, 218, 0.3);
		}
		75% {
			filter: blur(2px);
			transform: scale(1.02);
			box-shadow: 
				0 0 30px rgba(100, 255, 218, 0.5),
				inset 0 0 30px rgba(100, 255, 218, 0.2);
		}
		100% {
			filter: blur(0px);
			transform: scale(1);
			box-shadow: 
				0 0 20px rgba(100, 255, 218, 0.3),
				inset 0 0 20px rgba(100, 255, 218, 0.1);
		}
	}

	@keyframes textGlow {
		0% {
			filter: blur(0px);
			text-shadow: 
				0 0 10px rgba(100, 255, 218, 0.5),
				0 0 20px rgba(100, 255, 218, 0.3);
		}
		50% {
			filter: blur(1px);
			text-shadow: 
				0 0 20px rgba(100, 255, 218, 0.8),
				0 0 30px rgba(100, 255, 218, 0.5),
				0 0 40px rgba(100, 255, 218, 0.3);
		}
		100% {
			filter: blur(0px);
			text-shadow: 
				0 0 10px rgba(100, 255, 218, 0.5),
				0 0 20px rgba(100, 255, 218, 0.3);
		}
	}

	@keyframes dotPulse {
		0%, 100% {
			opacity: 0.6;
			transform: scale(1);
			filter: blur(0px);
		}
		50% {
			opacity: 1;
			transform: scale(1.3);
			filter: blur(1px);
		}
	}
</style>

<script>
	// Enhanced loader with blur animations
	let animationsStarted = false;
	
	function startAnimations() {
		if (animationsStarted) return;
		animationsStarted = true;
		
		console.log('Starting loader animations...');
		
		// Remove animate-entrance classes to show elements
		document.querySelectorAll('.animate-entrance').forEach(el => {
			el.classList.remove('animate-entrance');
		});
		
		// Check if anime.js is loaded for enhanced animations
		if (typeof anime !== 'undefined') {
			console.log('Anime.js loaded, adding enhanced blur effects');
			addEnhancedAnimations();
		} else {
			console.log('Using CSS animations only');
		}
		
		// Auto-hide loader after showing animation
		setTimeout(() => {
			hideLoader();
		}, 4000); // Show for 4 seconds to enjoy the blur effect
	}

	function addEnhancedAnimations() {
		// Enhanced blur animation with anime.js
		anime({
			targets: '#logo-square',
			filter: [
				'blur(0px)',
				'blur(8px)',
				'blur(0px)',
				'blur(4px)',
				'blur(0px)'
			],
			scale: [1, 1.1, 1, 1.05, 1],
			duration: 3000,
			easing: 'easeInOutSine',
			loop: true
		});

		// Enhanced text glow with anime.js
		anime({
			targets: '#logo-text',
			filter: [
				'blur(0px)',
				'blur(2px)',
				'blur(0px)'
			],
			textShadow: [
				'0 0 10px rgba(100, 255, 218, 0.5)',
				'0 0 30px rgba(100, 255, 218, 0.9)',
				'0 0 10px rgba(100, 255, 218, 0.5)'
			],
			duration: 2000,
			easing: 'easeInOutSine',
			loop: true,
			direction: 'alternate'
		});

		// Dots with staggered blur
		anime({
			targets: '.dot',
			filter: [
				'blur(0px)',
				'blur(3px)',
				'blur(0px)'
			],
			scale: [1, 1.5, 1],
			opacity: [0.6, 1, 0.6],
			duration: 1500,
			delay: anime.stagger(200),
			easing: 'easeInOutQuad',
			loop: true,
			direction: 'alternate'
		});
	}

	function hideLoader() {
		console.log('Hiding loader...');
		
		if (typeof anime !== 'undefined') {
			// Animate out with anime.js
			anime.remove('*'); // Stop all animations
			
			anime({
				targets: '#loader',
				opacity: [1, 0],
				scale: [1, 0.9],
				filter: ['blur(0px)', 'blur(10px)'],
				duration: 800,
				easing: 'easeInExpo',
				complete: () => {
					const loader = document.getElementById('loader');
					if (loader) {
						loader.style.display = 'none';
					}
				}
			});
		} else {
			// Fallback CSS animation
			const loader = document.getElementById('loader');
			if (loader) {
				loader.classList.add('fade-out');
				setTimeout(() => {
					loader.style.display = 'none';
				}, 600);
			}
		}
	}

	// Start animations when DOM is ready
	if (document.readyState === 'loading') {
		document.addEventListener('DOMContentLoaded', startAnimations);
	} else {
		startAnimations();
	}
</script>
